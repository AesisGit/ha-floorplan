title: Light
config:
  image: /local/floorplan/examples/light/light.svg
  stylesheet: /local/floorplan/examples/light/light.css

  defaults:
    on_hover: floorplan.hover_info
    on_click: homeassistant.more_info

  rules:
    - entities:
        - light.office
      on_click:
        service: floorplan.window_navigate
        data: /lovelace/lights
      on_state:
        service: floorplan.style_set
        data: |
          >
          var style = 'fill: black;'
          
          if (entity.state === 'on') {
            if (entity.attributes.color_temp) {
              var rgb = util.color.miredToRGB(entity.attributes.color_temp);
              style = `fill: rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]});`;
            }
            else if (entity.attributes.rgb_color) {
              var rgb = entity.attributes.rgb_color;
              style = `fill: rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]});`;
            }
            else {
              style = 'fill: white;';
            }
          }

          return style;
